generate a map to make sure the algorithm trim the map